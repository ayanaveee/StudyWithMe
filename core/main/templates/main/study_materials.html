{% extends 'base.html' %}
{% load static %}
{% block content %}

<section class="hero-section d-flex align-items-center text-white" style="background: linear-gradient(to right, #667eea, #764ba2); min-height: 30vh;">
  <div class="container text-center">
    <h1 class="text-white fw-bold display-4 mb-3">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h1>
    <p class="lead text-light">–ò–∑—É—á–∞–π —Ç–µ–º—ã –ª–µ–≥–∫–æ, –±—ã—Å—Ç—Ä–æ –∏ –ø–æ –∫—Ä–∞—Å–æ—Ç–µ üíºüìò</p>
  </div>
  <div class="custom-wave">
    <svg viewBox="0 0 1440 320"><path fill="#ffffff" fill-opacity="1" d="M0,160L40,144C80,128,160,96,240,96C320,96,400,128,480,133.3C560,139,640,117,720,117.3C800,117,880,139,960,133.3C1040,128,1120,96,1200,74.7C1280,53,1360,43,1400,37.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"></path></svg>
  </div>
</section>

<div class="container py-5">
  <h2 class="page-title">–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é üëá</h2>

  {% for category in categories %}
  <div class="category-block">
      <div class="category-header" onclick="toggleCategory(this)">
          <h2>{{ category.title }}</h2>
          <span class="arrow {% if forloop.first %}rotate{% endif %}">&#9654;</span>
      </div>
      <div class="materials-list {% if forloop.first %}open{% endif %}">
          <ul>
              {% for material in category.materials.all %}
                  <li><a href="{% url 'study_material_detail' material.pk %}">{{ material.title }}</a></li>
              {% empty %}
                  <li class="text-muted">–ù–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</li>
              {% endfor %}
          </ul>
      </div>
  </div>
  {% endfor %}
</div>

<style>
  .page-title {
      text-align: center;
      font-size: 36px;
      font-weight: 700;
      color: #2a5db0;
      position: relative;
      padding-bottom: 12px;
      margin-bottom: 40px;
  }

  .page-title::after {
      content: '';
      position: absolute;
      width: 60px;
      height: 4px;
      background: linear-gradient(to right, #2a5db0, #6ba6ff);
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 4px;
  }

  .category-block {
      margin: 0 auto 25px auto;
      border-radius: 20px;
      background: #ffffff;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      overflow: hidden;
  }

  .category-block:hover {
      box-shadow: 0 25px 45px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
  }

  .category-header {
      background-color: #f4f8fc;
      padding: 22px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
  }

  .category-header h2 {
      font-size: 22px;
      color: #2a5db0;
      margin: 0;
      font-weight: 700;
  }

  .arrow {
      font-size: 24px;
      color: #6ba6ff;
      transition: transform 0.3s ease;
  }

  .arrow.rotate {
      transform: rotate(90deg);
  }

  .materials-list {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.4s ease, opacity 0.4s ease, padding 0.3s ease;
      background: #fff;
  }

  .materials-list.open {
      max-height: 500px;
      opacity: 1;
      padding: 20px 30px 30px 30px;
  }

  ul {
      padding-left: 0;
      margin: 0;
      list-style: none;
  }

  ul li {
      margin: 12px 0;
  }

  ul li a {
      text-decoration: none;
      color: #2a5db0;
      font-weight: 600;
      font-size: 17px;
      transition: color 0.3s ease;
  }

  ul li a:hover {
      color: #1d3f87;
      text-decoration: underline;
  }
</style>

<script>
  function toggleCategory(header) {
      const arrow = header.querySelector('.arrow');
      const content = header.nextElementSibling;

      if (content.classList.contains('open')) {
          content.classList.remove('open');
          arrow.classList.remove('rotate');
      } else {
          document.querySelectorAll('.materials-list').forEach(el => el.classList.remove('open'));
          document.querySelectorAll('.arrow').forEach(el => el.classList.remove('rotate'));

          content.classList.add('open');
          arrow.classList.add('rotate');
      }
  }
</script>

{% endblock %}
