{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    body {
        background: linear-gradient(to right, #667eea, #764ba2);
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
    }

    .lesson-container {
        max-width: 900px; /* —É–≤–µ–ª–∏—á–µ–Ω–∞ —à–∏—Ä–∏–Ω–∞ */
        margin: 60px auto;
        background-color: #f9f9f9;
        border-radius: 25px;
        padding: 60px;
        box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2);
        text-align: center;
        animation: fadeIn 1s ease-in-out;
    }

    .lesson-title {
        font-size: 42px; /* –±–æ–ª—å—à–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        margin-bottom: 30px;
        color: #333;
        font-weight: 800;
        line-height: 1.4;
    }

    .lesson-description {
        font-size: 20px; /* —É–≤–µ–ª–∏—á–µ–Ω —Ç–µ–∫—Å—Ç */
        color: #555;
        line-height: 2; /* —É–≤–µ–ª–∏—á–µ–Ω –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª */
        margin-bottom: 40px;
    }

    .icon-book {
        font-size: 60px;
        color: #6c63ff;
        margin-bottom: 25px;
    }

    .favorite-btn {
        background-color: #eee;
        color: #444;
        border: none;
        padding: 12px 26px;
        font-size: 18px;
        border-radius: 10px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
    }

    .favorite-btn.active {
        background-color: #ff6b81;
        color: white;
    }

    @keyframes fadeIn {
        0% {
            opacity: 0;
            transform: translateY(20px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<div class="lesson-container">
    <div class="icon-book">üìò</div>
    <h1 class="lesson-title">{{ material.title }}</h1>
    <p class="lesson-description">
        <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ material.description }}
    </p>
    <p>{{ material.video | safe }}</p>

    <form method="post" action="{% url 'add_to_favorites' material.id %}" id="favoriteForm">
        {% csrf_token %}
        <button type="submit" id="favoriteBtn" class="favorite-btn">üíñ –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
    </form>
</div>

<script>
    let timer;
    let seconds = 0;
    let running = false;

    function updateTimerDisplay() {
        let hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
        let mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
        let secs = String(seconds % 60).padStart(2, '0');
        document.getElementById('timer').innerText = `${hrs}:${mins}:${secs}`;
    }

    function startTimer() {
        if (!running) {
            running = true;
            timer = setInterval(() => {
                seconds++;
                updateTimerDisplay();
            }, 1000);
        }
    }

    function pauseTimer() {
        running = false;
        clearInterval(timer);
    }

    function resetTimer() {
        running = false;
        clearInterval(timer);
        seconds = 0;
        updateTimerDisplay();
    }

    updateTimerDisplay();

    document.getElementById('favoriteForm').addEventListener('submit', function(event) {
        const btn = document.getElementById('favoriteBtn');
        btn.classList.add('active');
    });
</script>
{% endblock %}
